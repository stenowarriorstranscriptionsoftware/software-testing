<!-- Full Corrected index.html with Old Code + Admin Panel Button -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Steno Warriors Transcription Software</title>
  <link rel="stylesheet" href="styles.css">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-database-compat.js"></script>

  <!-- App Scripts -->
  <script src="lookup.js"></script>
  <script src="textLookup.js"></script>
  <script src="1c2.js"></script>
</head>
<body>

<div class="header">
  <h1>Steno Warriors Transcription Software</h1>
  <div id="user-info" style="display: none;"></div>
</div>

<!-- Main App Content -->
<div class="main" id="app-content" style="display: none;">
  <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
    <h2>Please select a Test</h2>
    <button id="showLeaderboard" class="download-btn">Show Leaderboard</button>
  </div>

  <div class="select-panel">
    <select id="volume-select">
      <option value="1">Test 1-50 (General Matter)</option>
      <option value="2">Test 51-100 (KC Mix Transcription)</option>
    </select>

    <select id="test-select"></select>

    <select id="speed-select">
      <option value="80">80 WPM</option>
      <option value="100">100 WPM</option>
    </select>
  </div>

  <div id="video-container"></div>

  <div class="timer-container">
    Typing timer: <span id="timer">50:00</span>
    <div class="timer-controls">
      <label><input type="radio" name="duration" value="2400"> 40 min</label>
      <label><input type="radio" name="duration" value="3000" checked> 50 min</label>
      <button id="startPause" class="tmrBtn">Start</button>
      <button id="reset" class="tmrBtn">Reset</button>
    </div>
  </div>

  <div id="paragraphA"></div>
  <textarea class="inputBox" id="paragraphB" spellcheck="false" placeholder="Click Start to begin typing" disabled></textarea>
  <div class="resultText" id="textBoxC" style="display: none;"></div>

  <button onclick="downloadPDF()" class="download-btn">Show Result</button>
</div>

<!-- Login Container -->
<div id="login-container" class="login-container">
  <div class="login-content">
    <h2>Welcome to Steno Warriors</h2>
    <div id="login-form">
      <div class="form-group">
        <label for="login-email">Email</label>
        <input type="email" id="login-email" placeholder="Enter your email">
      </div>
      <div class="form-group">
        <label for="login-password">Password</label>
        <input type="password" id="login-password" placeholder="Enter your password">
      </div>
      <button id="login-btn" class="auth-btn">Login</button>
      <div class="auth-divider">OR</div>
      <button id="googleSignIn" class="google-signin-btn">Sign in with Google</button>
    </div>
  </div>
</div>

<!-- Leaderboard Modal -->
<div id="leaderboard-modal" class="modal" style="display: none;">
  <div class="modal-content">
    <span class="close-modal">&times;</span>
    <h2>Leaderboard</h2>
    <div class="leaderboard-filters">
      <select id="leaderboard-test-select">
        <option value="all">All Tests</option>
      </select>
      <select id="leaderboard-speed-select">
        <option value="all">All Speeds</option>
        <option value="80">80 WPM</option>
        <option value="100">100 WPM</option>
      </select>
      <button id="refresh-leaderboard" class="download-btn">Refresh</button>
    </div>
    <div id="leaderboard-content">
      <table id="leaderboard-table">
        <thead>
          <tr>
            <th>Rank</th>
            <th>Name</th>
            <th>Test</th>
            <th>Speed</th>
            <th>Accuracy</th>
            <th>Words</th>
            <th>Typed</th>
            <th>Time</th>
            <th>Date</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>
    <div class="leaderboard-pagination">
      <button id="prev-page" disabled>Previous</button>
      <span id="page-info">Page 1 of 1</span>
      <button id="next-page" disabled>Next</button>
    </div>
  </div>
</div>

<div class="footer">
  <div>
    Made with <span style="color: red;">&hearts;</span> &middot; Anish &middot; <a href="#">Contact</a>
  </div>
</div>

<!-- Firebase Initialization and Auth Handling -->
<script>
  const firebaseConfig = {
    apiKey: "AIzaSyDYPy1bNQ9TqexiKfBhNw6q6ert8Iigmqc",
    authDomain: "stenowarriorstest.firebaseapp.com",
    databaseURL: "https://stenowarriorstest-default-rtdb.firebaseio.com",
    projectId: "stenowarriorstest",
    storageBucket: "stenowarriorstest.appspot.com",
    messagingSenderId: "837389838529",
    appId: "1:837389838529:web:a3d3bdf391e8ef9193cc40",
    measurementId: "G-YV19HS05Y5"
  };

  firebase.initializeApp(firebaseConfig);
  const auth = firebase.auth();

  auth.onAuthStateChanged((user) => {
    const loginContainer = document.getElementById('login-container');
    const appContent = document.getElementById('app-content');
    const userInfo = document.getElementById('user-info');

    if (user) {
      loginContainer.style.display = 'none';
      appContent.style.display = 'block';
      userInfo.style.display = 'flex';
      userInfo.style.alignItems = 'center';

      if (user.photoURL) {
        const img = document.createElement('img');
        img.src = user.photoURL;
        img.style.width = '40px';
        img.style.height = '40px';
        img.style.borderRadius = '50%';
        userInfo.appendChild(img);
      }

      const span = document.createElement('span');
      span.textContent = user.displayName || user.email;
      span.style.margin = '0 10px';
      userInfo.appendChild(span);

      const signOutBtn = document.createElement('button');
      signOutBtn.textContent = 'Sign Out';
      signOutBtn.className = 'sign-out-btn';
      signOutBtn.onclick = () => auth.signOut();
      userInfo.appendChild(signOutBtn);

      if (user.email === 'anishkumar18034@gmail.com') {
        const adminBtn = document.createElement('a');
        adminBtn.href = 'admin.html';
        adminBtn.textContent = 'Admin Panel';
        adminBtn.style = 'margin-left: 10px; background-color: #f72585; padding: 8px 16px; color: white; border-radius: 8px; text-decoration: none;';
        userInfo.appendChild(adminBtn);
        alert('âœ… Welcome Admin Anish!');
      }
    } else {
      loginContainer.style.display = 'flex';
      appContent.style.display = 'none';
      userInfo.style.display = 'none';
    }
  });
</script>

</body>
</html>
